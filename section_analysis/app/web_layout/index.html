<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <link rel="stylesheet" href="/web_layout/css/style.css">
  <title>Stresstable</title>
</head>

<body>
  <div class="whole-page">
    <div class="not-footer">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark"><a class="navbar-brand" href="/">Stresstable</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span
            class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item active"><a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item"><a class="nav-link" href="/sections">Section analysis</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Beam analysis</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Contacts</a></li>
            <li class="nav-item"><a class="nav-link" href="/web_layout/sign_up.html">Sign Up</a></li>
            <li class="nav-item"><a class="nav-link" href="/web_layout/sign_in.html">Sign In</a></li>
            {% if username %}
              <li class="nav-item"><a id="current_user" class="nav-link" href="#">{{ username }}</a></li>
            {% else %}
              <li class="nav-item"><a id="current_user" class="nav-link" href="#"></a></li>
            {% endif %}
          </ul>
        </div>
      </nav>
      <div class="container">
        <div class="division cross">
          <a href="/sections" class="h4 heading-link">Cross-section analysis</a>
          <p class="text-justify">
            &laquo;Cross-section analysis&raquo; is&nbsp;an&nbsp;advanced beam section calculator. &laquo;Cross-section
            analysis&raquo; can be&nbsp;used to&nbsp;determine the cross-sectional torsion and flexural structural
            properties, including torsion constant and warping constant and to&nbsp;visualise cross-sectional stresses
            resulting from combinations of&nbsp;applied forces and bending moments. &laquo;Cross-section analysis&raquo;
            is&nbsp;an&nbsp;useful tool for stress engineers for design and analysis of&nbsp;metal materials sections.
          </p>
        </div>
        <div class="division">
          <a href="#" class="h4 heading-link">Beam analysis</a>
          <h3>Coming soon...</h3>
          <p class="text-justify"></p>
        </div>
      </div>
    </div>
    <div class="footer">
      <p class="text-justify">&copy 2020 Stresstable tools. All rights reserved</p>
    </div>
  </div>
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
  <script src=/web_layout/js/signup_and_signin_guest.js>
   /* "use strict";

    const full_name = "Guest";
    const email = "guest@guest.com";
    const username = "Guest";
    const password = "Guest";

    const guest_data_signup = {
      "full_name": full_name,
      "email": email,
      "username": username,
      "password": password
    }

    const guest_data_signin = new FormData();
    guest_data_signin.append("username", username);
    guest_data_signin.append("password", password);

    const current_user = document.getElementById("current_user");

    window.onload = function () {
      const token = localStorage.getItem("Authorization");
      if (!token || token == "Bearer undefined") {
        signup_and_signin_guest(guest_data_signup);
        current_user.textContent = username;
      }
      else {
        get_current_username(current_user);
      }
    };


    function signup_and_signin_guest(guest_data_signup) {
      const signup_url = "/auth/create_user";
      const my_signup_settings = {
        method: 'POST',
        body: JSON.stringify(guest_data_signup)
      };
      fetch(signup_url, my_signup_settings);

      const signin_url = "/auth/token";
      const my_signin_settings = {
        method: 'POST',
        body: guest_data_signin
      };
      fetch(signin_url, my_signin_settings)
        .then(function (response) {
          response.text()
            .then(function (text) {
              localStorage.setItem("Authorization", "Bearer " + JSON.parse(text)["access_token"]);
            });
        });
    };


    function get_current_username(current_user) {
      const my_headers = new Headers();
      my_headers.append("Authorization", localStorage.getItem("Authorization"));
      const url = "/users/current_username";
      const my_settings = {
        method: "GET",
        headers: my_headers,
      };
      fetch(url, my_settings)
        .then(function (response) {
          response.text()
            .then(function (text) {
              current_user.textContent = JSON.parse(text)["username"];
            });
        });
    }
*/
  </script>
</body>

</html>
